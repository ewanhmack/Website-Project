/* ===============================
   PHOTOGRAPHY (clean CSS)
   =============================== */

:root {
  /* side inset so headers align with image edge */
  --media-edge: clamp(18px, 2.2vw, 24px);
}

/* ---------- Page fade-in ---------- */
@keyframes page-in {
  from { opacity: 0; transform: translateY(6px); }
  to   { opacity: 1; transform: translateY(0); }
}
.photography {
  animation: page-in 280ms cubic-bezier(.2,.8,.2,1) both;
}

/* ---------- Header ---------- */
.photos-header {
  width: min(100%, 1440px);
  margin-inline: auto;
  padding: clamp(12px, 3vw, 20px) var(--media-edge) 8px;
}
.photos-header-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: clamp(8px, 2vw, 16px);
  flex-wrap: wrap;
}
.photos-header-row > :first-child { flex: 1 1 420px; min-width: 240px; }
.photos-header h2 { margin: 0 0 4px; font-size: clamp(1.35rem, 2.6vw, 1.9rem); line-height: 1.2; }
.photos-header .muted { margin: 0; color: var(--muted, #94a3b8); line-height: 1.35; }

/* ---------- Toggle switch (Carousels ⇄ Album Grid) ---------- */
.view-switch {
  --w: clamp(220px, 32vw, 270px);
  --h: 34px;
  --pad: 3px;
  --thumb-w: 110px;
  --thumb-h: 28px;
  --dur: .28s;
  --ease: cubic-bezier(.2,.7,.2,1);
  appearance: none;
  background: none;
  border: 0;
  cursor: pointer;
  padding: 0;
  outline: none;
  display: inline-block;
}
.view-switch .track {
  position: relative;
  width: var(--w);
  height: var(--h);
  border-radius: 999px;
  background: color-mix(in srgb, #000 12%, transparent);
  border: 1px solid var(--border, #1f2937);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.02);
}
.view-switch .thumb {
  position: absolute;
  z-index: 0;
  width: var(--thumb-w);
  height: var(--thumb-h);
  top: 50%;
  left: 24%;
  transform: translate(-50%, -50%);
  border-radius: 999px;
  background: color-mix(in srgb, var(--brand, #6366f1) 75%, #ffffff 10%);
  box-shadow: 0 2px 12px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.25);
  transition: left var(--dur) var(--ease), transform 120ms ease;
}
.view-switch.is-on .thumb { left: 76%; }
.view-switch .label {
  position: absolute;
  z-index: 1;
  top: 50%;
  transform: translate(-50%, -50%);
  font-weight: 800;
  font-size: .92rem;
  line-height: 1;
  color: #cbd5e1;
  white-space: nowrap;
  pointer-events: none;
}
.view-switch .label.off { left: 24%; }
.view-switch .label.on  { left: 76%; }
.view-switch:not(.is-on) .label.off,
.view-switch.is-on       .label.on { color: #f1f5f9; }
.view-switch:focus-visible .track { outline: 2px solid var(--brand, #6366f1); outline-offset: 2px; }
.view-switch:hover .thumb  { transform: translate(-50%, -50%) scale(1.03); }
.view-switch:active .thumb { transform: translate(-50%, -50%) scale(.98); }

@media (max-width: 480px) {
  .view-switch { --w: 200px; --thumb-w: 100px; --thumb-h: 26px; }
  .view-switch .label { font-size: .88rem; }
}

/* ---------- View switch transition (content panels) ---------- */
.view-stage {
  position: relative;
  transition: height .32s cubic-bezier(.2,.7,.2,1);
  will-change: height;
  overflow: hidden; /* prevents inactive panel from adding scroll */
}
.view-panel {
  position: absolute; inset: 0;
  opacity: 0; transform: translateY(8px) scale(.985);
  pointer-events: none;
  transition: opacity .28s cubic-bezier(.2,.7,.2,1), transform .28s cubic-bezier(.2,.7,.2,1);
}
.view-panel.is-active {
  position: relative;
  opacity: 1;
  transform: none;
  pointer-events: auto;
}

/* ==========================================
   CAROUSELS — centered, responsive width
   ========================================== */
.carousel,
.viewport,
.carousel-head-row { width: min(100%, 1440px); }
.carousel { --carousel-height: clamp(360px, 60vh, 650px); margin: 0 auto; }
.stack { display: grid; gap: clamp(16px, 2vw, 22px); justify-content: center; }

/* section header */
.carousel-head-row {
  margin: 6px auto 20px;
  padding-inline: var(--media-edge);
  display: flex; align-items: center; justify-content: space-between;
}
.carousel-title { margin: 0; font-size: clamp(1rem, 2vw, 1.2rem); }

/* dots (theme) */
.dots.compact { display: flex; gap: 6px; }
.dot {
  height: 6px; width: 6px; border-radius: 999px; border: 0; cursor: pointer;
  background: var(--border, #455066);
  transition: background .2s ease, transform .2s ease;
}
.dot:hover { transform: scale(1.15); }
.dot.active { background: var(--brand, #4f46e5); }

/* shell */
.carousel-shell {
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: clamp(10px, 2vw, 18px);
  justify-content: center;
}

/* arrows */
.arrow {
  height: 30px; width: 30px; display: grid; place-items: center;
  border-radius: 999px;
  background: color-mix(in srgb, var(--panel, #0f172a) 70%, transparent);
  border: 1px solid var(--border, #1f2937);
  color: var(--text, #e5e7eb);
  cursor: pointer;
  transition: transform .08s ease, border-color .2s ease, background .2s ease;
  z-index: 2;
}
.arrow:hover {
  transform: translateY(-1px);
  border-color: color-mix(in srgb, var(--brand, #4f46e5) 25%, var(--border, #1f2937));
  background: color-mix(in srgb, var(--panel, #0f172a) 85%, transparent);
}

/* viewport/track */
.viewport {
  overflow: hidden;
  border-radius: 10px;
  border: 1px solid var(--border, #1f2937);
  background: var(--panel, #0f172a);
  padding: 0;
  height: var(--carousel-height);
  min-height: 0;
  box-sizing: border-box;
}
.track { display: flex; transition: transform .35s ease; height: 100%; }
.slide { flex: 0 0 100%; height: 100%; }

/* tiles */
.tiles { display: grid; grid-auto-rows: 100%; gap: clamp(6px, 1vw, 10px); height: 100%; }
.tiles-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
.tiles-1 { grid-template-columns: 1fr; }
.tile {
  margin: 0; height: 100%; border-radius: 8px; overflow: hidden;
  border: 1px solid var(--border, #1f2937); background: #0d1325;
}
.tile img {
  width: 100%; height: 100%; display: block; object-fit: cover;
  opacity: 0; transform: scale(.998);
  animation: tile-in 200ms ease forwards;
}
@keyframes tile-in { to { opacity: 1; transform: scale(1); } }

@media (max-width: 720px) { .tiles-3 { grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 520px) { .tiles-3 { grid-template-columns: 1fr; } }

/* ==========================================
   ALBUM GRID (full-bleed masonry)
   ========================================== */
.full-bleed {
  position: relative;
  left: 50%; right: 50%;
  margin-left: -50vw; margin-right: -50vw;
  width: 100vw; max-width: 100vw;
  padding-inline: clamp(8px, 1.6vw, 18px);
  column-gap: clamp(8px, 1.6vw, 18px);
  column-count: 1;
}
@media (min-width: 700px)  { .full-bleed { column-count: 2; } }
@media (min-width: 1000px) { .full-bleed { column-count: 3; } }
@media (min-width: 1400px) { .full-bleed { column-count: 4; } }
@media (min-width: 1800px) { .full-bleed { column-count: 5; } }

.album-grid.stylised { padding: 0 var(--media-edge); }
.album-item {
  position: relative;
  break-inside: avoid;
  margin: 0 0 clamp(8px, 1.6vw, 18px);
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid var(--border, #1f2937);
  background: var(--panel, #0f172a);
  box-shadow: var(--shadow, 0 1px 2px rgba(2,6,23,.6), 0 2px 6px rgba(2,6,23,.5));
}
.album-item img {
  opacity: 0; transform: translateY(4px);
  transition: opacity 300ms ease, transform 300ms ease;
  display: block; width: 100%; height: auto;
}
.album-item.is-loaded img { opacity: 1; transform: translateY(0); }

/* Misc */
.page-container { overflow-x: visible; }

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .photography { animation: none !important; }
  .track, .arrow, .view-stage, .view-panel { transition: none !important; }
  .tile img { animation: none !important; opacity: 1 !important; transform: none !important; }
  .album-item img { transition: none !important; opacity: 1 !important; transform: none !important; }
}

/* ==========================================
   RESPONSIVE SIZING (no duplicates)
   ========================================== */

/* Landscape baseline height; smaller at narrower breakpoints */
.carousel--landscape { 
  --carousel-height: clamp(240px, 45vh, 520px);
}
@media (max-width: 700px) {
  .carousel--landscape { --carousel-height: clamp(160px, 34vh, 320px); }
}
@media (max-width: 420px) {
  .carousel--landscape { --carousel-height: 140px; }
  .carousel--portrait  { --carousel-height: 450px; }
}

/* Slightly tighter gaps on very small screens */
@media (max-width: 480px) {
  .tiles { gap: 6px; }
}

/* Small screens: hide dots, overlay arrows, and narrow the viewport widths */
@media (max-width: 700px) {
  /* Hide dots */
  .carousel-head-row .dots,
  .dots { display: none !important; }

  /* Overlay arrows on the viewport */
  .carousel-shell {
    grid-template-columns: 1fr !important; /* viewport only */
    position: relative;
  }
  .carousel-shell > .viewport {
    grid-area: 1 / 1;
    margin-inline: auto;
  }
  .carousel-shell > .arrow {
    grid-area: 1 / 1;
    align-self: center;
    z-index: 3;
    width: 28px;
    height: 28px;
    background: rgba(0,0,0,.35);
    border-color: rgba(255,255,255,.14);
  }
  .carousel-shell > .arrow.left  { justify-self: start; margin-left: 6px; }
  .carousel-shell > .arrow.right { justify-self: end;   margin-right: 6px; }
  .carousel-shell > .arrow:hover,
  .carousel-shell > .arrow:focus-visible { background: rgba(0,0,0,.5); }

  /* Narrow the viewports */
  .carousel--portrait  .viewport { width: min(22vw, 120px); }
.carousel--landscape .viewport {
    width: min(84vw, 360px);
    height: calc(min(84vw, 360px) * 9 / 16); /* 16:9 from width */
  }
  /* Center single-tile slides inside the narrower viewport */
  .tiles-1 { justify-items: center; }
  .tiles-1 .tile { width: 100%; }
}

@media (max-width: 420px) {
  .carousel--portrait  .viewport { width: min(66vw, 360px); }
  .carousel--landscape .viewport {
    width: min(88vw, 320px);
    height: calc(min(88vw, 320px) * 9 / 16); /* 16:9 from width */
  }
}

@media (max-width: 700px) {
  .carousel--landscape .tile img { object-fit: contain; background: #0d1325; }
}

/* Center carousel titles on small screens */
@media (max-width: 700px) {
  .carousel-head-row {
    justify-content: center;     /* center the row */
    text-align: center;          /* center text inside */
    gap: 6px;
    margin-left: 0 !important;   /* override the inline margin-left from JSX */
  }
  .carousel-head-row .carousel-title {
    text-align: center;
    width: 100%;                 /* ensure it spans so centering works cleanly */
  }
}
